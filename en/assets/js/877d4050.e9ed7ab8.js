"use strict";(self.webpackChunkdocs_docusaurus=self.webpackChunkdocs_docusaurus||[]).push([[78],{4322:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>a,frontMatter:()=>c,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"server/index","title":"Serveur Zappy","description":"Le serveur est le composant central du projet Zappy. Il g\xe8re l\'\xe9tat du jeu, la logique, les r\xe8gles et coordonne la communication entre les clients IA et l\'interface graphique.","source":"@site/docs/server/index.md","sourceDirName":"server","slug":"/server/","permalink":"/Zappy/en/docs/server/","draft":false,"unlisted":false,"editUrl":"https://github.com/Epitech/Zappy/tree/main/docs/docusaurus/docs/server/index.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Protocole Serveur-GUI","permalink":"/Zappy/en/docs/protocols/server-gui"},"next":{"title":"Architecture du projet","permalink":"/Zappy/en/docs/architecture"}}');var i=s(4848),t=s(8453);const c={sidebar_position:1},d="Serveur Zappy",l={},o=[{value:"Architecture du serveur",id:"architecture-du-serveur",level:2},{value:"Configuration du serveur",id:"configuration-du-serveur",level:2},{value:"Protocole de communication",id:"protocole-de-communication",level:2},{value:"Commandes du client IA",id:"commandes-du-client-ia",level:3},{value:"Protocole GUI",id:"protocole-gui",level:3},{value:"Impl\xe9mentation",id:"impl\xe9mentation",level:2},{value:"Structure des fichiers",id:"structure-des-fichiers",level:2},{value:"Compilation et Ex\xe9cution",id:"compilation-et-ex\xe9cution",level:2},{value:"M\xe9canismes importants",id:"m\xe9canismes-importants",level:2},{value:"Gestion des ressources",id:"gestion-des-ressources",level:3},{value:"Gestion du temps",id:"gestion-du-temps",level:3},{value:"Mont\xe9e de niveau",id:"mont\xe9e-de-niveau",level:3}];function u(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"serveur-zappy",children:"Serveur Zappy"})}),"\n",(0,i.jsx)(n.p,{children:"Le serveur est le composant central du projet Zappy. Il g\xe8re l'\xe9tat du jeu, la logique, les r\xe8gles et coordonne la communication entre les clients IA et l'interface graphique."}),"\n",(0,i.jsx)(n.h2,{id:"architecture-du-serveur",children:"Architecture du serveur"}),"\n",(0,i.jsx)(n.p,{children:"Le serveur Zappy est con\xe7u avec une architecture modulaire :"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Gestionnaire de r\xe9seau"})," : G\xe8re les connexions client et la communication"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Moteur de jeu"})," : Impl\xe9mente les r\xe8gles du jeu et la logique"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Gestionnaire de ressources"})," : G\xe8re la carte de jeu et les ressources"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Gestionnaire d'\xe9quipe"})," : G\xe8re les \xe9quipes et les joueurs"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"configuration-du-serveur",children:"Configuration du serveur"}),"\n",(0,i.jsx)(n.p,{children:"Le serveur accepte les param\xe8tres de ligne de commande suivants :"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Param\xe8tre"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Valeur par d\xe9faut"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"-p"})}),(0,i.jsx)(n.td,{children:"Num\xe9ro de port"}),(0,i.jsx)(n.td,{children:"4242"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"-x"})}),(0,i.jsx)(n.td,{children:"Largeur de la carte"}),(0,i.jsx)(n.td,{children:"20"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"-y"})}),(0,i.jsx)(n.td,{children:"Hauteur de la carte"}),(0,i.jsx)(n.td,{children:"20"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"-n"})}),(0,i.jsx)(n.td,{children:"Noms des \xe9quipes (s\xe9par\xe9s par des espaces)"}),(0,i.jsx)(n.td,{children:"-"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"-c"})}),(0,i.jsx)(n.td,{children:"Nombre maximal de clients par \xe9quipe"}),(0,i.jsx)(n.td,{children:"10"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"-f"})}),(0,i.jsx)(n.td,{children:"Fr\xe9quence d'ex\xe9cution (ticks par seconde)"}),(0,i.jsx)(n.td,{children:"100"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"protocole-de-communication",children:"Protocole de communication"}),"\n",(0,i.jsxs)(n.p,{children:["Le serveur communique avec les clients en utilisant un protocole texte bas\xe9 sur TCP. Les commandes et r\xe9ponses sont envoy\xe9es sous forme de cha\xeenes de texte termin\xe9es par un caract\xe8re de nouvelle ligne (",(0,i.jsx)(n.code,{children:"\\n"}),")."]}),"\n",(0,i.jsx)(n.h3,{id:"commandes-du-client-ia",children:"Commandes du client IA"}),"\n",(0,i.jsx)(n.p,{children:"Le serveur accepte les commandes suivantes des clients IA :"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Forward"})," : Avancer d'une case"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Right"})," : Tourner \xe0 droite de 90\xb0"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Left"})," : Tourner \xe0 gauche de 90\xb0"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Look"})," : Observer l'environnement"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Inventory"})," : Afficher l'inventaire"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Broadcast text"})," : Diffuser un message \xe0 tous les joueurs"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Connect_nbr"})," : Obtenir le nombre de places disponibles dans l'\xe9quipe"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Fork"})," : Cr\xe9er un nouvel \u0153uf (nouveau joueur)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Eject"})," : \xc9jecter les joueurs sur la m\xeame case"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Take object"})," : Prendre un objet"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Set object"})," : Poser un objet"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Incantation"})," : D\xe9marrer une incantation pour monter de niveau"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"protocole-gui",children:"Protocole GUI"}),"\n",(0,i.jsx)(n.p,{children:"Le serveur envoie des mises \xe0 jour au client GUI pour lui permettre de visualiser l'\xe9tat du jeu en temps r\xe9el."}),"\n",(0,i.jsx)(n.h2,{id:"impl\xe9mentation",children:"Impl\xe9mentation"}),"\n",(0,i.jsx)(n.p,{children:"Le serveur est impl\xe9ment\xe9 en C et utilise les sockets POSIX pour la communication r\xe9seau et un mod\xe8le de programmation \xe9v\xe9nementiel pour g\xe9rer plusieurs clients simultan\xe9ment."}),"\n",(0,i.jsx)(n.h2,{id:"structure-des-fichiers",children:"Structure des fichiers"}),"\n",(0,i.jsx)(n.p,{children:"Le code du serveur est organis\xe9 comme suit :"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"main.c"})," : Point d'entr\xe9e du programme"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"parsing.c"})," : Analyse des arguments de la ligne de commande"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"network/*.c"})," : Gestion des connexions r\xe9seau"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"map/*.c"})," : Gestion de la carte et des ressources"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"player/*.c"})," : Gestion des joueurs et des commandes"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"compilation-et-ex\xe9cution",children:"Compilation et Ex\xe9cution"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Compilation\nmake -C src/Server\n\n# Ex\xe9cution\n./zappy_server -p <port> -x <width> -y <height> -n <team_names> -c <clients_per_team> -f <freq>\n"})}),"\n",(0,i.jsx)(n.h2,{id:"m\xe9canismes-importants",children:"M\xe9canismes importants"}),"\n",(0,i.jsx)(n.h3,{id:"gestion-des-ressources",children:"Gestion des ressources"}),"\n",(0,i.jsx)(n.p,{children:"Le serveur g\xe9n\xe8re al\xe9atoirement les ressources sur la carte et les renouvelle \xe0 intervalles r\xe9guliers en fonction de la fr\xe9quence configur\xe9e."}),"\n",(0,i.jsx)(n.h3,{id:"gestion-du-temps",children:"Gestion du temps"}),"\n",(0,i.jsx)(n.p,{children:"Toutes les actions dans le jeu sont mesur\xe9es en unit\xe9s temporelles. Le serveur utilise un syst\xe8me de file d'attente pour g\xe9rer les actions qui doivent \xeatre ex\xe9cut\xe9es apr\xe8s un certain d\xe9lai."}),"\n",(0,i.jsx)(n.h3,{id:"mont\xe9e-de-niveau",children:"Mont\xe9e de niveau"}),"\n",(0,i.jsx)(n.p,{children:"Le jeu comprend un syst\xe8me de mont\xe9e de niveau bas\xe9 sur des rituels d'incantation qui n\xe9cessitent :"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Un nombre sp\xe9cifique de joueurs"}),"\n",(0,i.jsx)(n.li,{children:"Des combinaisons pr\xe9cises de ressources"}),"\n",(0,i.jsx)(n.li,{children:"Tous les joueurs doivent \xeatre au m\xeame niveau"}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>d});var r=s(6540);const i={},t=r.createContext(i);function c(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);